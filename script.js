$(function() {
    var data = [
        {
            action: 'type',
            strings: ["Accessing restricted files.."],
            output: 'grabbing files..<br><br>',
            postDelay: 1000
        },
        { 
            action: 'type',
            strings: ["500 Internal Error"],
            output: '<span class="gray">Coded by cluzier +CodePen.io</span><br>&nbsp;',
            postDelay: 1000
        },
        { 
            action: 'type',
            strings: ["These are not the error codes you're looking for.", 'Please either report this error to an administrator or return back and forget you were here...'],
            postDelay: 2000
        },
        {
            action: 'type',
            strings: ["Process complete."],
            postDelay: 1000
        }
    ];

    function runScripts(data, pos) {
        var prompt = $('.prompt'),
            script = data[pos];
        if (script.clear === true) {
            $('.history').html('');
        }
        switch (script.action) {
            case 'type':
                prompt.html('');
                new Typed('.prompt', {
                    strings: script.strings,
                    typeSpeed: 50,
                    backSpeed: 20,
                    backDelay: 500,
                    startDelay: 500,
                    showCursor: true,
                    onComplete: function() {
                        setTimeout(function() {
                            $('.history').append(script.output);
                            $('section.terminal').scrollTop($('section.terminal')[0].scrollHeight);
                            pos++;
                            if (pos < data.length) {
                                runScripts(data, pos);
                            }
                        }, script.postDelay);
                    }
                });
                break;
            case 'show':
                $(script.selector).fadeIn('slow');
                break;
        }
    }

    runScripts(data, 0);
});
